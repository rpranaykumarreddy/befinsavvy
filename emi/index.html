<!DOCTYPE html>
<html>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0">
<title>EMI calculator</title>
<link href="converter.css" rel="stylesheet">
<style>

</style>

<body>
    <div id="total">
        <br>
        <h1>EMI calculator</h1><br>

        <div class="div-ran">
            <div>
                <p>Loan Amount: <span id="loan-prev"></span></p>
                <input type="range" min="1000" max="10000000" value="100000" class="slider" id="loan-rang">
            </div>
            <div>
                <p>Rate of interest: <span id="rate-prev"></span></p>
                <input type="range" min="1" max="50" value="10" class="slider" id="rate-rang">
            </div>
            <div>
                <p>Loan tenure: <span id="time-prev"></span></p>
                <input type="range" min="1" max="30" value="5" class="slider" id="time-rang">
            </div>
        </div>


        <!--output text division-->
        <div id="outp">
            <div>
                <p>EMI <span id="out-emi"></span></p>
                <p>Principal Amount <span id="out-pam"></span></p>
                <p>Total Interest <span id="out-tin"></span></p>
                <p>Total Amount <span id="out-tam"></span></p>
            </div>
        </div>

        <br>

        <p style="text-align:center;"> Scripted by <a href="https://github.com/rpranaykumarreddy" target="_blank">R Pranay Kumar Reddy</a></p>


    </div>
    <script>
        /*range value optimization*/
        var lora = document.getElementById("loan-rang");
        var lopr = document.getElementById("loan-prev");
        var rara = document.getElementById("rate-rang");
        var rapr = document.getElementById("rate-prev");
        var tira = document.getElementById("time-rang");
        var tipr = document.getElementById("time-prev");
        lopr.innerHTML = lora.value;
        rapr.innerHTML = rara.value;
        tipr.innerHTML = tira.value;

        lora.oninput = function() {
            lopr.innerHTML = this.value;
            cal();
        }
        rara.oninput = function() {
            rapr.innerHTML = this.value;
            cal();
        }
        tira.oninput = function() {
            tipr.innerHTML = this.value;
            cal();
        }

        /*range value optimization*/

        var outEmi = document.getElementById("out-emi");
        var outPam = document.getElementById("out-pam");
        var outTin = document.getElementById("out-tin");
        var outTam = document.getElementById("out-tam");

        var loaval = document.getElementById("loan-rang").value;
        var ratval = document.getElementById("rate-rang").value;
        var timval = document.getElementById("time-rang").value;
        var p, t, r, emi, toam, toin, pram;
        loaval = document.getElementById("loan-rang").value;
        ratval = document.getElementById("rate-rang").value;
        timval = document.getElementById("time-rang").value;
        p = loaval;
        r = ratval / 100;
        mr = r / 12;
        n = timval;
        mn = n * 12;

        /*EMI*/
        /*the formula to calculate emi is = [p x r x (1+r) ^ n] / [(1 + r) ^ (n - 1)]*/
        var EMI = Math.round((p * mr * (Math.pow((1 + mr), mn))) / ((Math.pow((1 + mr), mn)) - 1));
        outEmi.innerHTML = EMI;
        /*prinicpal amount*/
        outPam.innerHTML = p;
        /*the formula to calculate total interest is = P×(1+r)t-P*/
        outTin.innerHTML = (EMI * n * 12) - p;
        /*the formula to calculate total amount interest*/
        outTam.innerHTML = (EMI * n * 12);

        function cal() {
            loaval = document.getElementById("loan-rang").value;
            ratval = document.getElementById("rate-rang").value;
            timval = document.getElementById("time-rang").value;
            p = loaval;
            r = ratval / 100;
            mr = r / 12;
            n = timval;

            /*EMI*/
            /*the formula to calculate emi is = [p x r x (1+r) ^ n] / [(1 + r) ^ (n - 1)]*/
            var EMI = (p * mr * (Math.pow((1 + mr), mn))) / ((Math.pow((1 + mr), mn)) - 1);
            outEmi.innerHTML = EMI;
            /*prinicpal amount*/
            outPam.innerHTML = p;
            /*the formula to calculate total interest is = P×(1+r)t-P*/
            outTin.innerHTML = (EMI * n * 12) - p;
            /*the formula to calculate total amount interest*/
            outTam.innerHTML = (EMI * n * 12);
        }
    </script>

</body>

</html>
